<!DOCTYPE html>
<html lang="zh">
<head>
	
	<meta charset="utf-8" >
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>Post | fiammanda</title>
	<link rel="stylesheet" href="/log/styles/main.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lobster+Two&family=Fira+Code&family=Roboto:wght@500&display=swap" media="print" onload="this.media='all'">
	<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/leancloud-storage@3.2.0/dist/av-min.js"></script>
	

</head>
<body class="layout-archive" data-load>
	<aside data-load>
		<figure><div></div><div></div><div></div></figure>
	</aside>
	<div data-load class="wrap">
		
	<header>
		<img src="/favicon.svg">
		<h1>Post</h1>
		
		
		<nav>
			<div>
				<a href="/log/post/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M512,120v272c0,66.2-53.8,120-120,120H120C53.8,512,0,458.2,0,392l0-272C0,53.8,53.8,0,120,0l272,0 C458.2,0,512,53.8,512,120z M40,392c0,44.1,35.9,80,80,80h272c44.1,0,80-35.9,80-80V120c0-44.1-35.9-80-80-80H120 c-44.1,0-80,35.9-80,80V392z M256,88c-11,0-20,9-20,20v141c0,11,9,20,20,20c11,0,20-9,20-20V108C276,97,267,88,256,88z M179,88 c-11,0-20,9-20,20v187c0,11,9,20,20,20s20-9,20-20V108C199,97,190,88,179,88z M101,88c-11,0-20,9-20,20v84c0,11,9,20,20,20 s20-9,20-20v-84C121,97,112,88,101,88z M334,88c-11,0-20,9-20,20v44c0,11,9,20,20,20s20-9,20-20v-44C354,97,345,88,334,88z M334,212 c-11,0-20,9-20,20v141c0,11,9,20,20,20s20-9,20-20V232C354,221,345,212,334,212z M101,253c-11,0-20,9-20,20v44c0,11,9,20,20,20 s20-9,20-20v-44C121,262,112,253,101,253z M412,88c-11,0-20,9-20,20v167c0,11,9,20,20,20s20-9,20-20V108C432,97,423,88,412,88z"/></svg></a>
				<section>
					<a href="/log/tag/cite/" class="tag">CITE</a>
					<a href="/log/tag/link/" class="tag">LINK</a>
					<span></span>
					<a href="/log/tag/review/" class="tag">Review</a>
					<span></span>
					<a href="/log/tag/css/" class="tag">CSS</a>
					<a href="/log/tag/javascript/" class="tag">JavaScript</a>
					<a href="/log/tag/jquery/" class="tag">jQuery</a>
					<a href="/log/tag/website/" class="tag">Website</a>
					<a href="/log/tag/windows/" class="tag">Windows</a>
				</section>
			</div>
			<div>
				<a href="/log/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="m216.007 373.953c-22.013 0-44.024-6.906-62.396-20.724l-65.611-49.203c-8.837-6.627-10.628-19.163-4.001-28 6.627-8.836 19.162-10.629 28-4.001l65.634 49.22c22.6 16.998 54.135 16.998 76.711.017l65.656-49.237c8.835-6.628 21.372-4.835 28 4.001 6.627 8.837 4.835 21.373-4.001 28l-65.633 49.22c-18.351 13.803-40.356 20.707-62.359 20.707zm215.993-3.928v-105.05c0-66.168-53.832-120-120-120h-192c-66.168 0-120 53.832-120 120v105.051c0 66.168 53.832 120 120 120h192c66.168-.001 120-53.833 120-120.001zm-120-185.05c44.112 0 80 35.888 80 80v105.051c0 44.112-35.888 80-80 80h-192c-44.112 0-80-35.888-80-80v-105.051c0-44.112 35.888-80 80-80zm200 113v-156c0-66.168-53.832-120-120-120h-192c-39.284 0-76.14 19.284-98.589 51.586-6.304 9.07-4.062 21.533 5.009 27.837 9.069 6.303 21.533 4.061 27.837-5.009 14.976-21.549 39.553-34.414 65.743-34.414h192c44.112 0 80 35.888 80 80v156c0 11.046 8.954 20 20 20s20-8.954 20-20z"/></svg></a>
			</div>
			<div>
				<a href="/log/atom.xml" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="m392 512h-272c-66.168 0-120-53.832-120-120v-272c0-66.168 53.832-120 120-120h272c66.168 0 120 53.832 120 120v272c0 66.168-53.832 120-120 120zm-272-472c-44.112 0-80 35.888-80 80v272c0 44.112 35.888 80 80 80h272c44.112 0 80-35.888 80-80v-272c0-44.112-35.888-80-80-80zm0 328c-13.807 0-25 11.193-25 25s11.193 25 25 25 25-11.193 25-25-11.193-25-25-25zm163 30c0-92.636-75.364-168-168-168-11.046 0-20 8.954-20 20s8.954 20 20 20c70.579 0 128 57.42 128 128 0 11.046 8.954 20 20 20s20-8.954 20-20zm131 0c0-79.866-31.102-154.951-87.575-211.425s-131.56-87.575-211.425-87.575c-11.046 0-20 8.954-20 20s8.954 20 20 20c142.813 0 259 116.187 259 259 0 11.046 8.954 20 20 20s20-8.954 20-20z"/></svg></a>
			</div>
		</nav>
	</header>
	

		
		<main>
		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/photoshop-webp-plugin"></a>
				</figure>
				<div class="post-wrap">
					<h1>想用 WebP</h1>
					<section>
					<p>苹果做个人，快点支持吧。</p>
<p><a href="http://telegraphics.com.au/sw/product/WebPFormat">Photoshop WebP Plugin</a></p>

					
					</section>
					<div>
						<span></span>
						
							
							<a href="/log/tag/windows">Windows</a>
							
						
						<time>2020-04-21</time>
					</div>
				</div>
			</article>
			

		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/gridea-on-gitee"><img class="off" src="https://pic.downk.cc/item/5e9bfb4ac2a9a83be5e32645.jpg"></a>
				</figure>
				<div class="post-wrap">
					<h1>将 Gridea 部署到 Gitee</h1>
					<section>
					<p>部署到 Gitee 需要已经在 Github 上部署好的 Gridea 和一个 Gitee 账号（废话）。</p>

					
					</section>
					<div>
						<svg class="more" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 512 512">
							<path d="M119.83,245.106c-6.013,0-10.894,4.88-10.894,10.894c0,24.026-19.549,43.574-43.574,43.574S21.787,280.026,21.787,256 s19.549-43.574,43.574-43.574c6.013,0,10.894-4.88,10.894-10.894c0-6.013-4.88-10.894-10.894-10.894 C29.32,190.638,0,219.958,0,256c0,36.042,29.32,65.362,65.362,65.362c36.042,0,65.362-29.32,65.362-65.362 C130.723,249.987,125.843,245.106,119.83,245.106z"/>
							<path d="M256,190.638c-36.042,0-65.362,29.32-65.362,65.362c0,36.042,29.32,65.362,65.362,65.362 c6.013,0,10.894-4.88,10.894-10.894c0-6.013-4.88-10.894-10.894-10.894c-24.026,0-43.574-19.549-43.574-43.574 s19.549-43.574,43.574-43.574s43.574,19.549,43.574,43.574c0,6.013,4.88,10.894,10.894,10.894c6.013,0,10.894-4.88,10.894-10.894 C321.362,219.958,292.042,190.638,256,190.638z"/>
							<path d="M446.638,190.638c-6.013,0-10.894,4.88-10.894,10.894c0,6.013,4.88,10.894,10.894,10.894 c24.026,0,43.574,19.549,43.574,43.574s-19.549,43.574-43.574,43.574S403.064,280.026,403.064,256 c0-6.013-4.88-10.894-10.894-10.894s-10.894,4.88-10.894,10.894c0,36.042,29.32,65.362,65.362,65.362S512,292.042,512,256 C512,219.958,482.68,190.638,446.638,190.638z"/>
						</svg>
						
							
							<a href="/log/tag/gridea">Gridea</a>
							
							<a href="/log/tag/website">Website</a>
							
						
						<time>2020-04-20</time>
					</div>
				</div>
			</article>
			

		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/20200419"><img class="off" src="https://pic.downk.cc/item/5e9b2a5bc2a9a83be5ffde7f.jpg"></a>
				</figure>
				<div class="post-wrap">
					<h1>近期本地和隔壁更新</h1>
					<section>
					<p>无关发言：scoop 爱了。</p>
<ul>
<li>
<p>Gridea Deep Song Theme</p>
<p>Mobile Safari 不会图片自动高度的吗（瑟瑟</p>
<p>以及为什么我老是出现重复草稿……</p>
</li>
<li>
<p>jQuery 版本更新喇</p>
<p>但是 LeanCloud 不能更，新的会要求 server 呃呃呃</p>
<p>还有 Valine 得放在我自己的代码后面，不懂惹……</p>
</li>
<li>
<p>魔改 markedjs</p>
<p>终于把 <code>blockquote</code> 改成我想要的亚子了！</p>
<p>然鹅脚注还是不会，算了算了。</p>
<p>其它修改包括：</p>
</li>
</ul>
<pre><code>_cite_

__mark__

# H1 &lt;p&gt;subtitle&lt;/p&gt;

Table Caption
=============
其它同原生
</code></pre>

					
					</section>
					<div>
						<span></span>
						
							
							<a href="/log/tag/website">Website</a>
							
						
						<time>2020-04-19</time>
					</div>
				</div>
			</article>
			

		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/dubrovnik-croatia"><img class="off" src="https://pic.downk.cc/item/5e997a74c2a9a83be59b8203.jpg"></a>
				</figure>
				<div class="post-wrap">
					<h1>今天的 Windows Spotlight 爱了并代了</h1>
					<section>
					<p>克罗地亚杜布罗夫尼克的老港口：</p>
<blockquote>
<p>向来不轻易称赞的爱尔兰剧作家乔治·萧伯纳曾如此描述这座地中海港口城市：“如果你想见识人间天堂，那么就来杜布罗夫尼克。”在这里，坚固的中世纪城墙和城堡环绕着掩藏在山景中的文艺复兴时期建筑，旧城的大部分地区孤悬在亚得里亚海上。图片中显示出老港口及其入口处建于 14 世纪的圣约翰堡垒（或称为穆罗塔）。克罗地亚整个杜布罗夫尼克旧城是一片辉煌的景象。其历史起源变得越来越久远：最近的理论认为该市是由来自古希腊的水手建立的。</p>
</blockquote>

					
					</section>
					<div>
						<span></span>
						
						<time>2020-04-17</time>
					</div>
				</div>
			</article>
			

		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/image-management"><img class="off" src="https://pic.downk.cc/item/5e97cc4bc2a9a83be52f7ee6.jpg"></a>
				</figure>
				<div class="post-wrap">
					<h1>图片管理</h1>
					<section>
					<p>到底是用 MD5 命名 + Tag 呢，还是直接文件名标注呃呃呃呃</p>
<p>目前暂时是先用上了 <a href="https://github.com/Dijji/FileMeta/releases">FileMeta</a></p>

					
					</section>
					<div>
						<span></span>
						
							
							<a href="/log/tag/windows">Windows</a>
							
						
						<time>2020-04-14</time>
					</div>
				</div>
			</article>
			

		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/markdown-editor-apps"><img class="off" src="https://pic.downk.cc/item/5e97d362c2a9a83be533311e.jpg"></a>
				</figure>
				<div class="post-wrap">
					<h1>Markdown Editor 踩坑记录</h1>
					<section>
					<p>哼，还不都是用 <code>CodeMirror</code> 这个轮子造的。</p>

					
					</section>
					<div>
						<svg class="more" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 512 512">
							<path d="M119.83,245.106c-6.013,0-10.894,4.88-10.894,10.894c0,24.026-19.549,43.574-43.574,43.574S21.787,280.026,21.787,256 s19.549-43.574,43.574-43.574c6.013,0,10.894-4.88,10.894-10.894c0-6.013-4.88-10.894-10.894-10.894 C29.32,190.638,0,219.958,0,256c0,36.042,29.32,65.362,65.362,65.362c36.042,0,65.362-29.32,65.362-65.362 C130.723,249.987,125.843,245.106,119.83,245.106z"/>
							<path d="M256,190.638c-36.042,0-65.362,29.32-65.362,65.362c0,36.042,29.32,65.362,65.362,65.362 c6.013,0,10.894-4.88,10.894-10.894c0-6.013-4.88-10.894-10.894-10.894c-24.026,0-43.574-19.549-43.574-43.574 s19.549-43.574,43.574-43.574s43.574,19.549,43.574,43.574c0,6.013,4.88,10.894,10.894,10.894c6.013,0,10.894-4.88,10.894-10.894 C321.362,219.958,292.042,190.638,256,190.638z"/>
							<path d="M446.638,190.638c-6.013,0-10.894,4.88-10.894,10.894c0,6.013,4.88,10.894,10.894,10.894 c24.026,0,43.574,19.549,43.574,43.574s-19.549,43.574-43.574,43.574S403.064,280.026,403.064,256 c0-6.013-4.88-10.894-10.894-10.894s-10.894,4.88-10.894,10.894c0,36.042,29.32,65.362,65.362,65.362S512,292.042,512,256 C512,219.958,482.68,190.638,446.638,190.638z"/>
						</svg>
						
							
							<a href="/log/tag/windows">Windows</a>
							
						
						<time>2020-04-13</time>
					</div>
				</div>
			</article>
			

		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/valine-remove-official-style"></a>
				</figure>
				<div class="post-wrap">
					<h1>Valine 移除自带样式</h1>
					<section>
					<pre><code class="language-javascript">$('head style').eq(-1).remove();
</code></pre>

					
					</section>
					<div>
						<span></span>
						
							
							<a href="/log/tag/jquery">jQuery</a>
							
						
						<time>2020-04-08</time>
					</div>
				</div>
			</article>
			

		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/leancloud-like-for-static-site"><img class="off" src="https://pic.downk.cc/item/5e97d532c2a9a83be5344c6c.jpg"></a>
				</figure>
				<div class="post-wrap">
					<h1>基于 LeanCloud 的静态页面点击 / 点赞统计</h1>
					<section>
					<p>依次为 <code>JavaScript</code> 和 <code>CSS</code> 代码。</p>

					
					</section>
					<div>
						<svg class="more" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 512 512">
							<path d="M119.83,245.106c-6.013,0-10.894,4.88-10.894,10.894c0,24.026-19.549,43.574-43.574,43.574S21.787,280.026,21.787,256 s19.549-43.574,43.574-43.574c6.013,0,10.894-4.88,10.894-10.894c0-6.013-4.88-10.894-10.894-10.894 C29.32,190.638,0,219.958,0,256c0,36.042,29.32,65.362,65.362,65.362c36.042,0,65.362-29.32,65.362-65.362 C130.723,249.987,125.843,245.106,119.83,245.106z"/>
							<path d="M256,190.638c-36.042,0-65.362,29.32-65.362,65.362c0,36.042,29.32,65.362,65.362,65.362 c6.013,0,10.894-4.88,10.894-10.894c0-6.013-4.88-10.894-10.894-10.894c-24.026,0-43.574-19.549-43.574-43.574 s19.549-43.574,43.574-43.574s43.574,19.549,43.574,43.574c0,6.013,4.88,10.894,10.894,10.894c6.013,0,10.894-4.88,10.894-10.894 C321.362,219.958,292.042,190.638,256,190.638z"/>
							<path d="M446.638,190.638c-6.013,0-10.894,4.88-10.894,10.894c0,6.013,4.88,10.894,10.894,10.894 c24.026,0,43.574,19.549,43.574,43.574s-19.549,43.574-43.574,43.574S403.064,280.026,403.064,256 c0-6.013-4.88-10.894-10.894-10.894s-10.894,4.88-10.894,10.894c0,36.042,29.32,65.362,65.362,65.362S512,292.042,512,256 C512,219.958,482.68,190.638,446.638,190.638z"/>
						</svg>
						
							
							<a href="/log/tag/javascript">JavaScript</a>
							
						
						<time>2020-04-01</time>
					</div>
				</div>
			</article>
			

		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/jquery-animation-css-transition-confliction"><img class="off" src="https://pic.downk.cc/item/5e97d496c2a9a83be533ec30.jpg"></a>
				</figure>
				<div class="post-wrap">
					<h1>jQuery 动画效果与 CSS transition 冲突</h1>
					<section>
					<p>隐藏冲突：<code>scroll-behavior: smooth;</code></p>
<p>Safari 什么时候能支持这个……。</p>

					
					</section>
					<div>
						<span></span>
						
							
							<a href="/log/tag/jquery">jQuery</a>
							
							<a href="/log/tag/css">CSS</a>
							
						
						<time>2020-03-28</time>
					</div>
				</div>
			</article>
			

		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/clear-git-history"></a>
				</figure>
				<div class="post-wrap">
					<h1>暴力清理 Git 历史</h1>
					<section>
					<pre><code>git checkout --orphan new
git add -A
git commit -am &quot;Fresh commit&quot;
git branch -D master
git branch -m master
git push -f origin master
</code></pre>
<p>Gridea 通过程序推送，不用最后一行。</p>

					
					</section>
					<div>
						<span></span>
						
						<time>2020-03-19</time>
					</div>
				</div>
			</article>
			

		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/mobile-safari-resource-limit"><img class="off" src="https://pic.downk.cc/item/5e97cc4bc2a9a83be52f7eed.jpg"></a>
				</figure>
				<div class="post-wrap">
					<h1>Mobile Safari 资源限制</h1>
					<section>
					<p>TL;DR:</p>
<p>直接移除元素无用，必须修改 src 并等待一段时间。</p>
<pre><code class="language-javascript">var img = document.getElementById('previous');
img.parentNode.removeChild(img);
img.src = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';
window.timeout(function() {
	img = null;
}, 60000);
</code></pre>

					
					</section>
					<div>
						<span></span>
						
							
							<a href="/log/tag/javascript">JavaScript</a>
							
						
						<time>2020-02-26</time>
					</div>
				</div>
			</article>
			

		

			
			<article class="link" data-load>
				<div class="post-wrap">
					<a target="blank" href="https://regexr.com/">
						<h1>Link: RegExr</h1>
						<p><p>Learn, Build, &amp; Test RegEx</p>
</p>
					</a>
					<div>
						<span></span>
						
						<a href="/log/tag/link">LINK</a>
						
						<time>2020-01-25</time>
					</div>
				</div>
			</article>

			

		

			
			<article class="cite" data-load>
				<div class="post-wrap">
					<a href="/log/post/cite-20190615"><p>刿目怵心，刃迎缕解，钩章棘句，掐擢胃肾。</p>
<p><cite>——唐·韩愈《贞曜先生墓志铭》</cite></p>
</a>
					<div>
						<span></span>
						
						<a href="/log/tag/cite">CITE</a>
						
						<time>2019-06-15</time>
					</div>
				</div>
			</article>

			

		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/review-release-that-witch"><img class="off" src="https://pic.downk.cc/item/5e97cc4bc2a9a83be52f7eeb.jpg"></a>
				</figure>
				<div class="post-wrap">
					<h1>放开那个女巫</h1>
					<section>
					<p>就很好看。很推荐。个人喜欢的原因主要有三。</p>
<p>第一作为传统穿越种田流，因为设置了女巫这个异能群体，在其帮助下攀科技树方式大大异于同类作品，且种田过程非常翔实，看了很爽。</p>
<p>第二把女人当人写，有大量出彩的女性角色（我最喜欢的竟然是那个女演员）；尤其二女喜欢主角这样的剧情处理的相当好（至少暂时如此），没有引起不适。</p>
<p>第三带了很多游戏梗，游戏宅很喜欢。</p>
<p>微妙点是开了梦境世界这条支线之后感觉场面铺得太大，以及这个疑似种族连环大逃杀的背景主角只专注于对 A 而不是像一个正常穿越者这样试图解锁，还有主角亲属疑似发现主角穿越之后表示还是现在的主角好（虽然确实如此但是写出来给人感觉真的很微妙）。</p>
<p>总体而言此文水平远远高于推荐榜位置。推荐前几里有几篇根本看不到 V（</p>

					
					</section>
					<div>
						<span></span>
						
							
							<a href="/log/tag/review">Review</a>
							
						
						<time>2018-11-21</time>
					</div>
				</div>
			</article>
			

		

			
			<article class="post" data-load>
				<figure>
					<a href="/log/post/css-textsetting"><img class="off" src="https://pic.downk.cc/item/5e97cfefc2a9a83be531533c.jpg"></a>
				</figure>
				<div class="post-wrap">
					<h1>CSS 中英文混排字体</h1>
					<section>
					<p>如果网页上中英文使用不同字体，CSS 声明里英文必须写在前面，然后英文字体就会把中文里的部分标点符号如引号、破折号展示成半角状态。某乎这样对此强迫症的改用直角引号了。</p>
<p>但直角引号真的好麻烦鹅且我对其也有强迫症……</p>
<p>搜了一下发现其实可以用 <code>@font-face</code> 的 <code>unicode-range</code>。</p>
<p>顺便还找到了<a href="https://github.com/jonathantneal/system-font-css/blob/gh-pages/system-font.css">这样的操作</a>。</p>
<p>以及据说 <code>-apple-system</code> 不能用在缩写式 <code>font</code> 开头，会被误认为变量。</p>

					
					</section>
					<div>
						<span></span>
						
							
							<a href="/log/tag/css">CSS</a>
							
						
						<time>2018-04-30</time>
					</div>
				</div>
			</article>
			

		

			<nav>
				
				
			</nav>

		</main>

		
		<script type="text/javascript">
			if (window.innerHeight >= 684) {
				$('head').append('<script src="https://cdn.jsdelivr.net/npm/masonry-layout/dist/masonry.pkgd.min.js"><\/script>');
				$('head script').eq(-1).on('load', function() {
					$('main').masonry({
						itemSelector: 'article',
						columnWidth: 288,
						gutter: 32
					});
				});
			}
			$('article figure img').on('load', function() {
				$(this).removeClass('off');
				if ($('article figure img.off').length == 0) {
					$('main').masonry('layout');
				}
			});
		</script>
		
		<footer>
			<div>
				© fiammanda | Received
				<span class="view"></span>
				<span class="like"></span>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1050 1024"><path d="M740.8,69.6c156.4,0,283.2,126.8,283.2,283.1c0,258.4-512,601.6-512,601.6S0,623.5,0,352.7C0,158.1,126.8,69.6,283.1,69.6 c94.2,0,177.4,46.2,228.9,116.9C563.5,115.8,646.7,69.6,740.8,69.6z"/></svg>
			</div>
		</footer>

	</div>

	
	<script type="text/javascript">

		$(function() {
			$('[data-load]').each(function(i) {
				var load = $(this);
				setTimeout(function() {
					load.removeAttr('data-load');
				}, 50 * i);
			});
		})
		$(window).on('pageshow', function() {
			if ($('[data-load]').length) {
				$('[data-load]').each(function(i) {
					var load = $(this);
					setTimeout(function() {
						load.removeAttr('data-load');
					}, 50 * i);
				});
			}
		});

		$('a:not([target])').on('click', function(e) {
			e.preventDefault();
			let href = $(this).attr('href');
			$('.wrap, aside').attr('data-load', '').css('animation', 'none');
			setTimeout(function () {
				window.location = href;
			}, 500);
		});
		$('body').on('touchstart', function() {
			const eTags = '0INPUTTEXTAREA';
			$(this).on('click', function(e) {
				if (eTags.indexOf(e.target.tagName) < 0) {
					$('a, input, textarea').mouseout().blur();
				}
			});
		});

		AV.init({
			appId: 'hsCm0rxy54MvGFlXO5FIK7dM-9Nh9j0Va',
			appKey: 'Ji0eYrzpX9e7l3iG0sLH3RhX',
		});

		let url = window.location.pathname,
			site = AV.Object.createWithoutData('Counter', '5e96ffd5df5b3200088e9c64'),
			allView, allLike;
		url = url.startsWith('/log') ? url : '/log' + url;
		site.fetch().then(function(site) {
			allView = site.attributes.ov;
			allLike = site.attributes.like;
			if (!localStorage.getItem('/log/')) {
				site.increment('uv', 1).save().then(function() {
					localStorage.setItem('/log/', '1');
				});
				if (!sessionStorage.getItem('/log/')) {
					site.increment('ov', 1).save().then(function() {
						sessionStorage.setItem('/log/', '1');
					});
				}
			}
			$(function() {
				$('footer .view').attr('data-current', allView + ' Views & ').removeAttr('data-load');
				$('footer .like').attr('data-current', allLike + ' Likes').removeAttr('data-load');
			})
		});
		if (url != '/log/') {
			let query = new AV.Query('Counter'),
				Log = AV.Object.extend('Counter'),
				title = document.title.split(' |',1)[0],
				logId, logView = 1, logLike = 0;

			query.equalTo('url', url).first().then(function(log) {
				if (!log) {
					let log = new Log();
					log.set({
						'url': url, 'title': title,
						'ov': 1, 'uv': 1, 'like': 0,
					}).save().then(function(log) {
						logId = log.id;
					});
				} else {
					if (!localStorage.getItem(url)) {
						log.increment('uv', 1).save().then(function() {
							localStorage.setItem(url, '1');
						});
						if (!sessionStorage.getItem(url)) {
							log.increment('ov', 1).save().then(function() {
								sessionStorage.setItem(url, '1');
							});
						}
					}
					logId = log.id;
					logView = log.attributes.ov;
					logLike = log.attributes.like;
				}
				if (url.startsWith('/log/post/') && url != '/log/post/') {
					$(function() {
						if (localStorage.getItem(url) == '2') {
							$('article .like').addClass('on');
						}
						$('article .view').attr({
							'data-prev': logView-1,
							'data-next': logView,
						}).removeAttr('data-load').addClass('on');
						$('article .like').attr({
							'data-prev': logLike,
							'data-next': logLike+1,
						}).removeAttr('data-load').on('click', function() {
							let page = AV.Object.createWithoutData('Counter', logId);
							if (localStorage.getItem(url) != '2') {
								site.increment('like', 1).save();
								page.increment('like', 1).save().then(function() {
									localStorage.setItem(url, '2');
									$('.like').addClass('on');
								});
							} else {
								site.increment('like', -1).save();
								page.increment('like', -1).save();
								localStorage.setItem(url, '1');
								$(this).removeClass('on');
							}
						});
						$('article .like.on').attr({
							'data-prev': logLike-1,
							'data-next': logLike,
						});
					})
				}
			});
		}
	</script>

	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-162600333-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'UA-162600333-1');
	</script>


</body>
</html>
